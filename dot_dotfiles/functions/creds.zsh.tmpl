# ~/.dotfiles/functions/creds.zsh.tmpl
# Auto-generated by chezmoi — do not edit in-place.
# --------------------------------------------------
# creds  —  minimal helper to pull a field from 1Password
#          Usage: creds <item-uid> <field>
#
# The body is chosen at *template render* time:
#   * Connect mode  → uses op://vault/item/field syntax
#   * Classic mode → uses `op item get`

# Set a default vault for Connect; caller can override before apply.
export OP_CONNECT_VAULT="${OP_CONNECT_VAULT:-homelab}"

creds() {
  if [ -z "$2" ]; then
    echo "Usage: creds <item/uid> <field>"
    return 1
  fi
{{- if env "OP_CONNECT_HOST" }}
  # -------- Connect mode --------
  op read "op://${OP_CONNECT_VAULT}/${1}/${2}"
{{- else }}
  # -------- Classic account mode --------
  op item get "$1" --fields "$2" --reveal
{{- end }}
}